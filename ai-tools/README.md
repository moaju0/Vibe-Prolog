# AI Workflow Tools

Automation helpers that wire together git, GitHub, and external AI coding assistants.
Each subdirectory is self-contained, depends only on the Python stdlib plus CLI tools
like `gh`, `llm`, `kilocode`, and `claude`, and can be run via `uv` or as an executable script.

## Layout

- `autocoder_utils/`: Shared Python helpers used by the Kilocode/Claude flows.
- `change-tracker/`: Git changelog generator used by the scheduled workflow.
- `gh-pr-helper/`: Standalone formatter that fetches and prints PR review comments.
- `kilocode/`: Scripts that orchestrate Kilocode/Claude along with git and GitHub.

## Requirements

Install the following CLIs and ensure they are available on `PATH`:

- `uv` (for running these tools)
- `git`
- `gh` (GitHub CLI, authenticated with the target repo)
- `llm`
- `kilocode` (Kilocode automation)
- `claude` (Claude automation)

Environment variables:

- `OPENAI_API_KEY` must be set (used by `llm`)
- Optional `LLM_MODEL` override (defaults to `gpt-5-nano`)

Repository assumptions:

- Commands run inside a git repository whose default branch is `main`
- Remote name `origin` exists (used for `git log origin/main..`)

## Installation

Install the package once so the shared modules are discoverable from any working
directory:

```bash
uv pip install -e ./ai-tools
```

Re-run the same command whenever you change files under `ai-tools/` to refresh
your environment.

## uv project

A single `pyproject.toml` lives at `ai-tools/pyproject.toml`, so every script
shares the same environment. From the repo root you can run:

```bash
uv run ai-tools/kilocode/fix-issue-with-kilocode 123
uv run ai-tools/kilocode/address-pr-comments-with-kilocode 456
uv run ai-tools/claude/fix-issue-with-claude 789
```

Each script also has an executable shebang, so you may invoke them directly via
`./ai-tools/...` if you prefer.

## Change tracker

`ai-tools/change-tracker/generate-changelog.py` walks git history, computes stats,
and writes daily markdown changelog entries under `changes/`. It is used by the
`generate-changelog.yml` GitHub Action but may also be run manually:

```bash
python ai-tools/change-tracker/generate-changelog.py
```

## Kilocode tools

### `fix-issue-with-kilocode`

Given an issue number, the script fetches the issue via `gh`, generates a branch
name prefixed with `fix-kilocode/<issue>`, runs `kilocode --auto` with the issue
details, stages/commits changes, pushes the branch, and opens a PR using content
generated by `llm`.

Usage:

```bash
uv run ai-tools/kilocode/fix-issue-with-kilocode 123
# or
./ai-tools/kilocode/fix-issue-with-kilocode 123
```

### `address-pr-comments-with-kilocode`

Automates addressing review comments on an existing PR. It identifies the PR
branch, checks it out, pulls the latest changes, collects PR comments via
`ai-tools/gh-pr-helper/gh-pr-helper`, feeds them to `kilocode --auto`, stages
and commits the updates with an AI-generated message, and pushes.

Usage:

```bash
uv run ai-tools/kilocode/address-pr-comments-with-kilocode 456
# or
./ai-tools/kilocode/address-pr-comments-with-kilocode 456
```

## Claude tool

### `fix-issue-with-claude`

Mirrors the Kilocode issue workflow but uses the `claude` CLI. It creates a
branch named `fix-claude/<issue>...`, runs `claude` with the issue content,
stages/commits the changes, pushes, and raises a PR.

Usage:

```bash
uv run ai-tools/claude/fix-issue-with-claude 123
# or
./ai-tools/claude/fix-issue-with-claude 123
```
